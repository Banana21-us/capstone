<div class="form-container">
    <h2>Parent Registration</h2>

    <form id="parentform" [formGroup]="parentform" (ngSubmit)="registerParent()">
        <div class="row">
            <div class="col-md-4 me-3">
                <div class="form-group">
                    <label for="firstName">First Name:</label>
                    <input type="text" id="firstName" formControlName="fname" class="form-control" required>
                </div>
            </div>
            <div class="col-md-4 me-3">
                <div class="form-group">
                    <label for="lastName">Last Name:</label>
                    <input type="text" id="lastName" formControlName="lname" class="form-control" required>
                </div>
            </div>
            <div class="col-md">
                <div class="form-group">
                    <label for="middleInitial">Middle Initial:</label>
                    <input type="text" id="middleInitial" formControlName="mname" class="form-control" required>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 me-5">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" formControlName="email" class="form-control" required>
                </div>
            </div>
            <div class="col-md">
                <div class="form-group">
                    <label for="relationship">Relationship:</label>
                    <input type="text" id="relationship" formControlName="relationship" class="form-control" required>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 me-5">
                <div class="form-group">
                    <label for="address">Address:</label>
                    <textarea id="address" formControlName="address" class="form-control" rows="1" required></textarea>
                </div>
            </div>
            <div class="col-md">
                <div class="form-group">
                    <label for="contact">Contact:</label>
                    <input type='text' id='contact' formControlName='contact_no' class='form-control' required />
                </div>
            </div>
        </div>

        <!-- Children's LRN Section -->
        <div class='form-group'>
            <label>Student's Name:
              <button type='button' (click)="openDialog()" class='btn btn-success ms-2'>+</button>
            </label>

            <!-- List of Children here -->
            <!-- <ul>
                <li *ngFor='let student of studentList; let i = index' style="display: flex; align-items: center; position: relative;">
                    
                    <i *ngIf='studentList.length > 1' 
                        (click)='removeStudent(i)' 
                        style='color: red; font-size: 15px; ' 
                        class='bi bi-trash me-2'></i>
                    <span style="flex-grow: 1;">{{ student.fullName }} (LRN: {{ student.LRN }})</span>
                   
                </li>
            </ul> -->
            <ul style="display: flex; flex-wrap: wrap; gap: 16px; list-style-type: none; padding: 0;">
                <li class="section-list" *ngFor="let student of studentList; let i = index" 
                    style="flex: 0 0 calc(33.33% - 16px); /* Make each item take 1/3 of the width */
                           display: flex; 
                           align-items: center; 
                           position: relative; 
                           border: 1px solid #ccc; 
                           border-radius: 4px; 
                           background-color: #f0f8ff; 
                           padding: 12px; 
                           margin-bottom: 10px; 
                           height: 60px;">
                    
                    <span style="flex-grow: 1; 
                                 font-size: 16px; 
                                 font-weight: 500;">
                       {{ student.fullName }} | LRN: {{ student.LRN }}
                    </span>
                    <i *ngIf="studentList.length > 0"
                        (click)="removeStudent(i)"
                        style="color: red; font-size: 15px;" 
                        class="bi bi-trash me-2"></i>
                </li>
            </ul>

            <!-- Hidden input to store LRNs -->
            <div formArrayName="LRN">
                <div *ngFor="let lrnControl of getLRNControls(); let i = index">
                    <input type='hidden' [formControlName]="i"> <!-- Use index to bind correctly -->
                </div>
            </div>
        </div>

        <!-- Password Field -->
        <div class='form-group'>
            <label for='password'>Password:</label>
            <input type='password' formControlName='password' id='password' class='form-control' required />
        </div>

        <!-- Submit Button -->
        <button type='submit' class='btn btn-primary'>Register</button>
    </form>
</div>